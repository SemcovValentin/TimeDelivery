<!DOCTYPE html>
<html lang="ru" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Delivery - Доставка еды</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>

    <style>

        body, html {
            overflow-x: hidden;
        }

        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            will-change: transform;
        }

        .card:hover {
            transform: scale(1.05); /* Увеличение на 5% */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); /* Тень */
            z-index: 10; /* Чтобы карточка была поверх соседних */
        }


        #scrollToTopBtn.show {
            display: block !important;
        }
        #scrollToTopBtn {
            display: none; /* Hidden by default */
            position: fixed; /* Fixed position */
            bottom: 20px; /* Distance from the bottom */
            right: 20px; /* Distance from the right */
            z-index: 99; /* Make sure it does not overlap */
            border: none; /* Remove border */
            outline: none; /* Remove outline */
            background-color: transparent; /* Transparent background */
            cursor: pointer; /* Add a mouse pointer on hover */
            padding: 0; /* Remove padding */
            transition: transform 0.3s ease; /* Add transition for smooth effect */
        }

        #scrollToTopBtn img {
            width: 40px; /* Размер изображения */
            height: 40px; /* Размер изображения */
            border-radius: 50%; /* Rounded corners */
            transition: transform 0.3s ease; /* Add transition for smooth effect */
        }

        #scrollToTopBtn:hover img {
            transform: scale(1.1); /* Increase size on hover */
        }

        .btn-cart-color{
            background-color: #ff9900;
        }
        .btn-cart {
            color: white; /* Белый текст */
            border: none; /* Удаление границы */
            padding: 8px 12px; /* Внутренний отступ */
            border-radius: 5px; /* Закругленные углы */
            transition: background-color 0.3s ease-in-out; /* Эффект наведения */
        }

        .btn-cart:hover {
            background-color: #ff6600; /* Темнее при наведении */
        }

        .bi-cart {
            margin-right: 5px; /* Отступ после иконки */
        }

        .scroll-menu {
            position: fixed;
            top: -100px; /* Изначально скрыт */
            width: 100%;
            background-color: #f0f0f0;
            padding: 10px;
            border-bottom: 1px solid #ddd;
            z-index: 1000;
            transition: top 0.3s ease-in-out;
            display: none; /* Изначально скрыт */
        }

        .scroll-menu.show {
            top: 0;
            display: block; /* Показываем при появлении */
        }

        .scroll-menu.hide {
            top: -100px;
        }

        .card-img-top {
            max-width: 100%;
            max-height: 100%;
            transition: transform 0.3s ease-in-out;
        }

        .card-img-top:hover {
            transform: scale(1.2);
        }


        .ingredient-text {
            font-size: 0.8em;
            display: -webkit-box;
            -webkit-box-orient: vertical;
        }
        .card {
            width: 18rem;
            height: auto;
        }
        .card img {
            height: 200px;
            object-fit: cover;
        }
        .btn-warning {
            border-radius: 5px;
        }

        .input-group {
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .input-group input {
            padding: 10px;
            background-color: #efebec;
        }

        .logo {
            max-height: 70px;
            width: auto;
        }

        .menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .hed {
            max-height: 80px;
        }

        .menu-item {
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 25px;
            background: linear-gradient(45deg, #ff6f61, #ff9966);
            color: white;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .menu-item:hover {
            background: linear-gradient(45deg, #ff9966, #ff6f61);
            transform: scale(1.1);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.3);
        }

        .menu-item:active {
            transform: scale(0.95);
        }

        .orange-text {
            color: orange;
        }

        .accordion-wrapper-gradient {
            border-radius: 12px;
            padding: 2px; /* Толщина рамки */
            background: linear-gradient(90deg, #ff6f61, #ffb88c); /* Градиентная рамка */
            box-shadow: 0 8px 20px rgba(255, 111, 97, 0.25);
            max-width: 900px;
            margin: 20px auto;
        }

        .accordion-wrapper-gradient > .accordion-container {
            border-radius: 10px; /* Чтобы совпадали скругления */
            background-color: #ffffff;
            padding: 20px;
            box-sizing: border-box;
        }

        .info-img{
            max-width: 170px;
            max-height: 150px;
        }
        h5{
            color: white;
            font-family: "Times New Roman", Times, serif;
        }
        /*поиск*/
        #searchInput {
            background-color: #fff !important;
            color: #212529 !important;
            border-color: #888 !important;
        }
        #searchInput::placeholder {
            color: #6c757d !important;
            opacity: 1 !important;
        }


        /*footer*/
        .footer-bg {
            background-color: #222;
            width: 100%;
        }

        .footer-bg h5 {
            color: #ff9900;
            margin-bottom: 0.5rem;
        }

         .footer-text {
            color: #ccc;
            font-size: 0.97rem;
            margin-bottom: 0.5rem;
            text-decoration: none;
        }

        .footer .btn-footer {
            width: fit-content;
            align-self: flex-start;
        }

         a.footer-text:hover {
            color: #ff9900;
            text-decoration: underline;
        }

        .footer-text:hover {
            color: #ff9900;
        }
        .text{
            font-family: "Times New Roman", Times, serif;
        }

        /* форма входа и регистрации */
        .offcanvas {
            background-color: #222;
            color: #888;
            border-left: 1px solid #444;
        }
        .auth-form {
            max-width: 400px;
            margin: 2rem auto;
            padding: 2rem;
            background: #2a2a2a;
            border-radius: 1rem;
            box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.2);
            color: #999;
            border: 1px solid #444;
        }
        .auth-switcher .btn-group {
            box-shadow: 0 0.125rem 0.5rem rgba(0,0,0,0.2);
            border-radius: 0.75rem;
            overflow: hidden;
        }
        .auth-switcher .btn {
            border: none;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .auth-switcher .btn:not(.active) {
            background: #333;
            color: #f8f9fa;
        }
        .auth-switcher .btn.active {
            background: #0d6efd;
            color: #fff;
        }
        .form-control {
            background: #333;
            border: 1px solid #444;
            color: #f8f9fa;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
        }
        .form-control:focus {
            background: #444;
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.2rem rgba(13,110,253,0.25);
            color: #fff;
        }
        .form-control::placeholder {
            color: #eee; /* почти белый */
            opacity: 1;
        }
        .btn-primary {
            background: #0d6efd;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        .btn-primary:hover {
            background: #0b5ed7;
            transform: translateY(-1px);
        }
        .form-group label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #f8f9fa;
        }
        .text-danger {
            font-size: 0.875rem;
            color: #ff6b6b;
        }
        .toast {
            border-radius: 0.75rem;
        }
        .toast-header {
            border-radius: 0.75rem 0.75rem 0 0;
        }
        .input-group-text {
            background: #444;
            color: #888;
            border: 1px solid #555;
        }
        @media (max-width: 576px) {
            .auth-form {
                padding: 1.5rem;
            }
        }
        .toast {
            border-radius: 0.75rem;
            background: #2a2a2a;
            border: 1px solid #444;
            color: #eee;
        }
        .toast-header {
            border-radius: 0.75rem 0.75rem 0 0;
            background: #333;
            color: #eee;
            border-bottom: 1px solid #444;
        }
        .toast-body {
            background: #2a2a2a;
            color: #888;
        }

    </style>
</head>
<body>
<header class="hed d-flex align-items-center justify-content-between bg-light border-bottom px-4 py-2">
    <a href="/timeDelivery/">
        <img class="logo" src="/Logo.png" alt="logotype">
    </a>
    <div class="info d-flex flex-column gap-2">
        <span>Среднее время доставки <span class="orange-text">67 мин.</span></span>
        <span>Оценка качества <span class="orange-text">4.99</span>⭐</span>
    </div>
    <div class="contacts d-flex align-items-center gap-4">
        <div>📞</div>
        <div class="d-flex flex-column">
            <span>+7 (978) 999-99-99</span>
            <span>+7 (978) 555-55-55</span>
        </div>
        <button id="loginPopoverBtn" class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
            Вход
        </button>
        <div><a href="#" class="btn btn-cart btn-cart-color btn-sm"><i class="bi bi-cart"></i>КОРЗИНА</a></div>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasRightLabel">Авторизация</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Закрыть"></button>
        </div>
        <div class="offcanvas-body">
            <div class="auth-switcher mb-4">
                <div class="btn-group w-100">
                    <button type="button" class="btn btn-primary active" id="loginTab">Вход</button>
                    <button type="button" class="btn btn-outline-primary" id="registerTab">Регистрация</button>
                </div>
            </div>

            <!-- Форма входа -->
            <form id="loginForm" class="auth-form">
                <div class="form-group mb-3">
                    <label for="loginPhone">Номер телефона:</label>
                    <input type="text" class="form-control" id="loginPhone" placeholder="+7 (XXX) XXX-XX-XX" required>
                </div>
                <div class="form-group mb-4">
                    <label for="loginPassword">Пароль:</label>
                    <input type="password" class="form-control" id="loginPassword" placeholder="Введите пароль" minlength="6" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Войти</button>
            </form>

            <!-- Форма регистрации -->
            <form id="registerForm" class="auth-form d-none">
                <div class="form-group mb-3">
                    <label for="registerName">Имя:</label>
                    <input type="text" class="form-control" id="registerName" placeholder="Введите ваше имя" required>
                </div>
                <div class="form-group mb-3">
                    <label for="registerEmail">Email:</label>
                    <input type="email" class="form-control" id="registerEmail" placeholder="Введите ваш email" required>
                </div>
                <div class="form-group mb-3">
                    <label for="registerPhone">Номер телефона:</label>
                    <input type="text" class="form-control" id="registerPhone" placeholder="+7 (XXX) XXX-XX-XX" required>
                </div>
                <div class="form-group mb-3">
                    <label for="registerPassword">Пароль:</label>
                    <input type="password" class="form-control" id="registerPassword" placeholder="Введите пароль" minlength="6" required>
                </div>
                <div class="form-group mb-4">
                    <label for="registerConfirm">Повторите пароль:</label>
                    <input type="password" class="form-control" id="registerConfirm" placeholder="Повторите пароль" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Зарегистрироваться</button>
            </form>
        </div>
    </div>

    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="universalToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto toast-title">Успех</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Закрыть"></button>
            </div>
            <div class="toast-body">
                Сообщение успешно отправлено!
            </div>
        </div>
    </div>
</header>


<nav class="menu d-flex justify-content-center gap-3 mt-3">
    <th:block th:each="category : ${categories}">
        <a th:href="@{'/timeDelivery/catalog/?category=' + ${category.name}}"
           class="menu-item"
           th:text="${category.name.toUpperCase()}"></a>
    </th:block>
</nav>


<div class="scroll-menu bg-light border-bottom fixed-top" style="display: none;">
    <div class="container">
        <div class="row align-items-center justify-content-between">
            <div class="col-auto">
                <a class="navbar-brand" href="#">
                    <img class="logo" src="/Logo.png" alt="logotype">
                </a>
            </div>
            <div class="col-auto">
                <nav class="menu d-flex justify-content-center gap-3 mt-3">
                    <th:block th:each="category : ${categories}">
                        <a th:href="@{'/timeDelivery/catalog/?category=' + ${category.name}}"
                           class="menu-item"
                           th:text="${category.name.toUpperCase()}"></a>
                    </th:block>
                </nav>
            </div>
            <div class="col-auto d-flex align-items-center">
                <span class="me-2 text-secondary">📞 +7 (978) 999-99-99</span>
                <div><a href="#" class="btn btn-cart btn-cart-color btn-sm"><i class="bi bi-cart"></i>КОРЗИНА</a></div>
            </div>
        </div>
    </div>
</div>

<!--карусель-->
<div id="carouselExampleIndicators" class="carousel slide mt-3" data-bs-ride="carousel">
    <div id="carouselIndicators" class="carousel-indicators"></div>
    <div id="carouselInner" class="carousel-inner"></div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
            data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
            data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<div class="d-flex justify-content-center mt-3">
    <div class="input-group rounded-pill shadow-sm" style="width: 66.66%;">
        <input id="searchInput" class="form-control border-end-0 rounded-pill search-input" type="search" placeholder="🔍 Поиск" aria-label="Search">
    </div>
</div>

<div class="d-flex flex-wrap justify-content-center gap-3 mt-3">
    <div>
        <input type="checkbox" class="btn-check" id="btn-check-veg" name="veg" checked autocomplete="off">
        <label class="btn btn-primary" for="btn-check-veg">Вегетарианское</label>
    </div>
    <div>
        <input type="checkbox" class="btn-check" id="btn-check-spicy" name="spicy" checked autocomplete="off">
        <label class="btn btn-primary" for="btn-check-spicy">Острое</label>
    </div>
    <div>
        <input type="checkbox" class="btn-check" id="btn-check-new" name="new" checked autocomplete="off">
        <label class="btn btn-primary" for="btn-check-new">Новинки</label>
    </div>
    <div>
        <input type="checkbox" class="btn-check" id="btn-check-hit" name="hit" autocomplete="off">
        <label class="btn btn-primary" for="btn-check-hit">Хит</label>
    </div>
</div>

<div class="container mt-4">
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 filtr-catalog" id="catalog"></div>
</div>

<button id="scrollToTopBtn">
    <img src="/UP.png" alt="Scroll to top" />
</button>

<!-- информация о доставке, оплате, о компании-->
<div class="accordion-wrapper-gradient">
    <div class="accordion-container d-flex justify-content-center mt-3">
        <div class="accordion accordion-flush w-100" id="accordionFlushExample">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                        Доставка
                    </button>
                </h2>
                <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body row">
                        <img src="/info/delivery.png" alt="Доставка" class="col-12 col-md-3 mb-3 mb-md-0 img-fluid info-img">
                        <div class="col-12 col-md-9">
                            <p>ДОСТАВКА В ЛЮБОЙ УГОЛОК СЕВАСТОПОЛЯ</p>
                            <span>Сенсей вкуса Мияги готов порадовать своими идеальными сочетаниями вкусов блюд не только в наших ресторанах, но и у вас дома или в офисе!</span><br>
                            <span>Для этого достаточно добавить понравившиеся вам блюда в корзину и сделать заказ от 600 рублей, наша служба доставки совершенно бесплатно привезет его вам в нужное время и в нужное место.</span><br>
                            <span>Доставка суши осуществляется в любой район города Севастополя:</span>
                            <ul>
                                <li><span>Ленинский район, Нахимовский район:</span>
                                    <span>Вс. - Чт. с 10:00 до 02:00 (оформление последнего заказа до 01:45)<br>
                              Пт. - Сб. с 10:00 до 02:00 (оформление последнего заказа до 01:45)</span>
                                </li>

                                <li><span>Гагаринский район, Казачья бухта:</span>
                                    <span>Вс. - Чт. с 10:00 до 02:00 (оформление последнего заказа до 01:45)<br>
                                  Пт. - Сб. с 10:00 до 02:00 (оформление последнего заказа до 01:45)</span>
                                </li>
                            </ul>
                            <span>Оформление заказов:</span>
                            <ul>
                                <li>По Севастополю от 700₽</li>
                                <li>В Фиолент от 2500₽</li>
                                <li>В Инкерман, Сахарная головка, Штурмовое от 3000₽</li>
                                <li>В Балаклаву от 3000₽</li>
                            </ul>
                            <span>В удаленные районы: Северная сторона доставка не осуществляется.</span><br>
                            <span>Бесплатная доставка суши, роллов пиццы и wok!</span><br>
                            <span>Для того, чтобы доставлять ваши заказы в срок и при этом в состоянии "с пылу с жару", мы организовали две кухни в разных частях города и оснастили курьеров специальными термосумками для доставки блюд.</span><br>
                            <span>Это дает нам возможность быстро доставлять ваши заказы, не тратя драгоценное время на длительный путь. Мы подаем нашим клиентам блюда прямо из-под ножа шеф-повара на дом с такой же скоростью, как и в ресторане.</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                        Оплата
                    </button>
                </h2>
                <div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body row">
                        <img src="/info/cash.png" alt="Оплата" class="col-12 col-md-3 mb-3 mb-md-0 img-fluid info-img">
                        <div class="col-12 col-md-9">
                            <p>ВЫБИРАЙТЕ УДОБНЫЙ ДЛЯ ВАС СПОСОБ ОПЛАТЫ - МЫ СОГЛАСНЫ НА ЛЮБЫЕ УСЛОВИЯ</p>
                            <p>Забота о наших клиентах - главная составляющая концепции Мияги.
                                Поэтому мы стараемся угодить вам не только вкусными блюдами и выгодными акциями, но удобством оплаты наших услуг;</p>
                            <span>В ресторанах "Мияги Town" и "Мияги Hall", а также при заказе доставки еды на дом, либо в офис, наши курьеры и официанты принимают любые виды оплаты:</span>
                            <ul>
                                <li>расчет наличными средствами;</li>
                                <li>оплата картой курьеру;</li>
                            </ul>
                            <span>При посещении ресторанов "Мияги Town" и "Мияги Hall", а также при заказе еды на дом, предъявители бонусных карт имеют право расплатиться баллами, собранными при предыдущих посещениях, если их сумма будет до 50% стоимости чека;</span><br>
                            <span>Мы любим наших гостей и заботимся о них, поэтому предлагаем самые удобные и выгодные условия для комфортного посещения заведений Мияги или заказа доставки на дом.</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
                        О компании
                    </button>
                </h2>
                <div id="flush-collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                    <div class="accordion-body row">
                        <img src="/info/company.png" alt="О компании" class="col-12 col-md-3 mb-3 mb-md-0 img-fluid info-img">
                        <div class="col-12 col-md-9">
                            <span>Miyagi Family - территория хорошего вкуса.</span><br>
                            <span>Вы можете быть уверенны в нашей работе и ее качестве, потому что:</span>
                            <ul>
                                <li>В команде Мияги Family работают только профессионалы своего дела. Высококлассные повара превращают любое блюдо в шедевр, уделяя особое внимание подаче блюда;</li>
                                <li>В ресторанах Мияги соблюдаются стандарты качества, потому что мы используем профессиональное дорогое оборудование для приготовления блюд;</li>
                                <li>На кухне наших ресторанов всегда только свежие и качественные продукты;</li>
                                <li>Вас ждет приятная атмосфера, стильные интерьеры и уют, которые не оставят вас равнодушными;</li>
                                <li>Для вас наша команда создает новинки: необычные блюда, авторские напитки, умопомрачительные десерты.</li>
                            </ul>
                            <span>Приходите в гости и попробуйте сами!</span><br>
                            <span>Наши повара всегда рады накормить вас бодрящим завтраком в кругу друзей, вкусным обедом с коллегой или уютным ужином в кругу семьи!</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


</body>

<footer class="footer-bg">
    <div class="container py-4">
        <div class="row gy-4 justify-content-center">
            <div class="col-12 col-sm-6 col-lg-3">
                <div class="d-flex flex-column footer-boxes h-100">
                    <h5>О МИЯГИ</h5>
                    <span class="footer-text">Мы готовим кухню, которую ты захочешь попробовать снова.</span>
                    <button type="button" class="btn btn-outline-warning btn-footer mt-3" onclick="window.location.href='/restaurants'">Подробнее</button>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-2">
                <div class="d-flex flex-column footer-boxes h-100">
                    <h5>О КОМПАНИИ</h5>
                    <a href="/restaurants" class="footer-text">Контакты</a>
                    <a href="/bonuses" class="footer-text">Бонусы и скидки</a>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-2">
                <div class="d-flex flex-column footer-boxes h-100">
                    <h5>ДОСТАВКА И ОПЛАТА</h5>
                    <a href="/delivery" class="footer-text">Доставка</a>
                    <a href="/payment" class="footer-text">Оплата</a>
                    <a href="/pickup" class="footer-text">Самовывоз</a>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-3">
                <div class="d-flex flex-column footer-boxes h-100">
                    <h5>КОНТАКТНАЯ ИНФОРМАЦИЯ</h5>
                    <h5>+7 (978) 999-99-99</h5>
                    <h5>+7 (978) 555-55-55</h5>
                    <span class="footer-text">Время работы доставки: 10:00-02:00</span>
                    <span class="footer-text">Бесплатная доставка суши и пиццы по Севастополю.</span>
                    <span class="footer-text">г.Севастополь, ул. Олега Кошевого, 14А</span>
                    <span class="footer-text">г.Севастополь, ул. Фадеева, 48</span>
                </div>
            </div>
        </div>
    </div>
</footer>

<script>
    //////////////////////////////////////////////////////
    //форма входа и регистрации
    // Функция показа Toast
    function showUniversalToast(title, message, type = 'success') {
        const toastEl = document.getElementById('universalToast');
        const toastTitle = toastEl.querySelector('.toast-title');
        const toastBody = toastEl.querySelector('.toast-body');
        const toastHeader = toastEl.querySelector('.toast-header');

        toastEl.classList.remove('bg-success', 'bg-info', 'bg-warning', 'bg-danger');
        toastHeader.classList.remove('bg-success', 'bg-info', 'bg-warning', 'bg-danger');
        toastEl.classList.add('bg-' + type);
        toastHeader.classList.add('bg-' + type);

        toastTitle.textContent = title;
        toastBody.textContent = message;
        const toast = new bootstrap.Toast(toastEl);
        toast.show();

        setTimeout(() => toast.hide(), 5000);
    }

    document.addEventListener("DOMContentLoaded", function () {
        // Элементы управления
        const loginTab = document.getElementById('loginTab');
        const registerTab = document.getElementById('registerTab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');

        // Переключение между формами
        function switchForm(formToShow) {
            loginForm.classList.toggle('d-none', formToShow !== 'login');
            registerForm.classList.toggle('d-none', formToShow !== 'register');
            loginTab.classList.toggle('active', formToShow === 'login');
            registerTab.classList.toggle('active', formToShow === 'register');
            loginTab.classList.toggle('btn-primary', formToShow === 'login');
            loginTab.classList.toggle('btn-outline-primary', formToShow !== 'login');
            registerTab.classList.toggle('btn-primary', formToShow === 'register');
            registerTab.classList.toggle('btn-outline-primary', formToShow !== 'register');
            if (formToShow === 'login') {
                document.getElementById('loginPhone').value = '';
            }
        }

        loginTab.addEventListener('click', () => switchForm('login'));
        registerTab.addEventListener('click', () => switchForm('register'));

        // Маска для номеров телефона
        function initPhoneMask(inputId) {
            const input = document.getElementById(inputId);
            input.addEventListener('focus', () => {
                if (!input.value) input.value = '+7 (';
            });
            input.addEventListener('input', (e) => {
                let val = e.target.value.replace(/\D/g, '').substring(1);
                if (val.length > 10) val = val.substring(0, 10);
                e.target.value = `+7 (${val.substring(0,3)}) ${val.substring(3,6)}-${val.substring(6,8)}-${val.substring(8,10)}`;
            });
        }

        initPhoneMask('loginPhone');
        initPhoneMask('registerPhone');

        // Валидация формы регистрации
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('registerPassword').value;
            const confirm = document.getElementById('registerConfirm').value;
            const email = document.getElementById('registerEmail').value;

            if (password !== confirm) {
                alert('Пароли не совпадают!');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Введите корректный email!');
                return;
            }

            showUniversalToast('Регистрация', 'Вы успешно зарегистрировались!', 'success');
            this.reset();
            switchForm('login');
        });

        /*// Валидация формы входа
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showUniversalToast('Успешный вход', 'Вы успешно вошли в систему!', 'success');
        });*/
    });

    //отправка на backend при регистрации
    function cleanPhone(phone) {
        return phone.replace(/[^+0-9]/g, '');
    }
    document.getElementById('registerForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const phone = document.getElementById('registerPhone').value;
        const cleanPhoneValue = cleanPhone(phone);
        const data = {
            name: document.getElementById('registerName').value,
            email: document.getElementById('registerEmail').value,
            phone: cleanPhoneValue,
            password: document.getElementById('registerPassword').value
        };
        console.log('Отправляемые данные:', data);

        fetch('/timeDelivery/register', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        })
            .then(res => res.text())
            .then(text => console.log(text))
            .catch(err => console.error(err));
    });

    //отправка на backend при входе
    document.getElementById('loginForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const phone = document.getElementById('loginPhone').value;
        const cleanPhoneValue = cleanPhone(phone);
        const data = {
            phone: cleanPhoneValue,
            password: document.getElementById('loginPassword').value
        };
        fetch('/timeDelivery/login', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        })
            .then(res => res.json())
            .then(data => {
                // Сохраняем токен, например, в localStorage
                localStorage.setItem('token', data.token);
                // Перенаправляем или показываем сообщение об успешном входе
                showUniversalToast('Вход', 'Вход выполнен!', 'success');
            })
            .catch(err => {
                showUniversalToast('Ошибка', 'Неверный телефон или пароль', 'danger');
            });
    });



    //////////////////////////////////////////////////////////////
        //обработка формы для входа
    document.addEventListener("DOMContentLoaded", function () {
        var popoverTrigger = document.getElementById('loginPopoverBtn');
        var popover = new bootstrap.Popover(popoverTrigger, {
            trigger: 'focus', // или 'click'
            html: true,
            content: `
            <form id="authForm" class="d-flex flex-column gap-2">
                <input type="text" class="form-control" placeholder="Логин" required>
                <input type="password" class="form-control" placeholder="Пароль" required>
                <div class="d-flex justify-content-between gap-2">
                    <button type="submit" class="btn btn-primary">Вход</button>
                    <button type="button" class="btn btn-outline-primary" onclick="location.href='/register'">Регистрация</button>
                </div>
            </form>
        `
        });

        popoverTrigger.addEventListener('shown.bs.popover', function () {
            var form = document.querySelector('#authForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    var login = this.querySelector('input[type="text"]').value;
                    var password = this.querySelector('input[type="password"]').value;
                    alert('Логин: ' + login + ', Пароль: ' + password);
                });
            }
        });
    });
        /////////////////////////////////////////////////////////


//карусель
    fetch('/images')
        .then(response => response.json())
        .then(images => {
            const carouselInner = document.getElementById('carouselInner');
            const carouselIndicators = document.getElementById('carouselIndicators');

            // Создание индикаторов
            images.forEach((image, index) => {
                const indicator = document.createElement('button');
                indicator.type = 'button';
                indicator.dataset.bsTarget = '#carouselExampleIndicators';
                indicator.dataset.bsSlideTo = index;
                if (index === 0) {
                    indicator.classList.add('active');
                }
                indicator.ariaLabel = `Slide ${index + 1}`;
                carouselIndicators.appendChild(indicator);
            });

            // Создание изображений в карусели
            images.forEach((image, index) => {
                const carouselItem = document.createElement('div');
                carouselItem.classList.add('carousel-item');
                if (index === 0) {
                    carouselItem.classList.add('active');
                }

                const img = document.createElement('img');
                img.src = `/news/${image}`;
                img.classList.add('d-block', 'w-100');
                img.alt = image;

                carouselItem.appendChild(img);
                carouselInner.appendChild(carouselItem);
            });
        })
        .catch(error => console.error('Error fetching images:', error));

    ////////////////////////////////////////////////////////////////
    //переход по поиску
    const searchInput = document.querySelector('input[type="search"]');

    searchInput.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') { // при нажатии Enter
            event.preventDefault();
            const query = encodeURIComponent(searchInput.value.trim());
            if (query) {
                window.location.href = `/search?query=${query}`;
            }
        }
    });
    ////////////////////////////////////////////////////////////
    //выводит карточки товаров по выборке

    document.addEventListener("DOMContentLoaded", () => {
        // Получаем контейнер, в который будем вставлять карточки блюд
        const catalog = document.getElementById("catalog");

        // Переменная для хранения всех блюд, полученных с сервера
        let allDishes = [];

        // Функция для отрисовки карточек блюд на странице
        function renderCards(dishes) {
            // Очищаем контейнер перед отрисовкой новых карточек
            catalog.innerHTML = "";

            // Если массив блюд пуст, выводим сообщение об отсутствии блюд
            if (dishes.length === 0) {
                catalog.innerHTML = "<p>Нет блюд для отображения</p>";
                return; // Прекращаем выполнение функции, т.к. отрисовывать нечего
            }

            // Для каждого блюда создаём карточку и добавляем её в контейнер
            dishes.forEach(dish => {
                const card = document.createElement("div");
                card.className = "col-md-4 mb-4"; // Bootstrap классы для сетки и отступов

                // Формируем HTML карточки с данными блюда
                card.innerHTML = `
  <div class="card h-100 d-flex flex-column">
    <div class="d-flex justify-content-center mb-3">
      <img src="${dish.imageUrl}" class="card-img-top img-fluid" alt="${dish.name}" style="max-height: 200px; object-fit: contain;">
    </div>
    <div class="card-body d-flex flex-column justify-content-between flex-grow-1">
      <h5 class="card-title">${dish.name}</h5>
      <p class="card-text ingredient-text">${dish.ingredient}</p>
      <div class="d-flex justify-content-between align-items-center mt-auto">
        <h5 class="card-title">${dish.price} руб.</h5>
        <p class="card-text">${dish.weight} г.</p>
      </div>
      <a href="#" class="btn btn-warning w-100 mt-3" style="border-radius: 5px;">В корзину 🛒</a>
    </div>
  </div>
`;

                // Добавляем карточку в контейнер
                catalog.appendChild(card);
            });
        }

        // Функция фильтрации блюд по состоянию чекбоксов
        function filterDishes() {
            // Получаем состояние чекбоксов, инвертируя checked,
            // т.к. в вашей логике "нажатая кнопка" соответствует checked = false
            const isVeganChecked = !document.getElementById("btn-check-veg").checked;
            const isSpicyChecked = !document.getElementById("btn-check-spicy").checked;
            const isNewChecked = !document.getElementById("btn-check-new").checked;
            const isTopChecked = !document.getElementById("btn-check-hit").checked;

            // Логируем текущие фильтры для отладки
            console.log("Фильтры (инвертированные):", { isVeganChecked, isSpicyChecked, isNewChecked, isTopChecked });

            // Фильтруем все блюда в соответствии с выбранными фильтрами
            const filtered = allDishes.filter(dish => {
                // Если фильтр включён, то блюдо должно иметь соответствующее свойство true
                if (isVeganChecked && !dish.vegan) return false;
                if (isSpicyChecked && !dish.spicy) return false;
                if (isNewChecked && !dish.new) return false;
                if (isTopChecked && !dish.top) return false;
                return true; // Блюдо прошло все фильтры
            });

            // Отрисовываем отфильтрованные блюда
            renderCards(filtered);
        }

        // Получаем данные с сервера по адресу /catalog
        fetch("/catalog")
            .then(response => {
                // Проверяем успешность ответа
                if (!response.ok) {
                    throw new Error(`Ошибка HTTP: ${response.status}`);
                }
                // Парсим JSON из ответа
                return response.json();
            })
            .then(data => {
                // Логируем полученные данные для проверки
                console.log("Полученные данные:", data);

                // Сохраняем все блюда в переменную для дальнейшей фильтрации
                allDishes = data;

                // Отрисовываем блюда с учётом текущих фильтров (по умолчанию)
                filterDishes();
            })
            .catch(error => console.error("Ошибка при загрузке данных:", error));

        // Навешиваем обработчики события change на все чекбоксы
        // При изменении состояния любого чекбокса вызывается фильтрация блюд
        ["btn-check-veg", "btn-check-spicy", "btn-check-new", "btn-check-hit"].forEach(id => {
            const checkbox = document.getElementById(id);
            if (checkbox) {
                checkbox.addEventListener("change", filterDishes);
            } else {
                // Если чекбокс не найден, выводим ошибку в консоль
                console.error(`Элемент с id ${id} не найден!`);
            }
        });
    });


    ///////////////////////////////////////////////////////////////////////////////////
    //менюшка, которая следует за экраном
    let lastScrollTop = 0;

    window.addEventListener("scroll", () => {
        let scrollTop = window.scrollY;
        let scrollMenu = document.querySelector(".scroll-menu");

        if (scrollTop > lastScrollTop) {
            // Прокрутка вниз
            if (scrollTop > 150) { // Появляется после прокрутки на 200 пикселей
                scrollMenu.style.display = "block"; // Показываем элемент
                scrollMenu.classList.remove("hide");
                scrollMenu.classList.add("show");
            }
        } else {
            // Прокрутка вверх
            if (scrollTop < 150) { // Исчезает при прокрутке до 100 пикселей от верха
                scrollMenu.classList.remove("show");
                scrollMenu.classList.add("hide");
                scrollMenu.style.display = "none"; // Скрываем элемент
            }
        }

        lastScrollTop = scrollTop;
    });

    //////////////////////////////////////////////////////////////////
    // кнопка вверх

    let scrollToTopBtn = document.getElementById("scrollToTopBtn");

    // Когда пользователь прокручивает документ на 20 пикселей вниз от его верхней части, покажите кнопку
    window.onscroll = function() {scrollFunction()};

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            scrollToTopBtn.classList.add("show");
        } else {
            scrollToTopBtn.classList.remove("show");
        }
    }
    // Когда пользователь нажимает кнопку, прокручивается до начала документа.
    scrollToTopBtn.addEventListener("click", function(){
        document.body.scrollTop = 0; // For Safari
        document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
</script>

</html>
